<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados del Torneo - Copa Polo 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .team-rojo { background-color: #ef4444; color: white; }
        .team-negro { background-color: #1f2937; color: white; }
        .team-blanco { background-color: #f9fafb; color: #1f2937; border: 1px solid #d1d5db; }
        .team-azul { background-color: #3b82f6; color: white; }
        .team-amarillo { background-color: #f59e0b; color: white; }
        .tab-active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        .sticky-col-1 {
            position: sticky;
            left: 0;
            background-color: white;
            z-index: 10;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
            min-width: 3.5rem;
            width: 3.5rem;
        }
        .sticky-col-2 {
            position: sticky;
            left: 3.5rem; /* Ancho de la primera columna (#) */
            background-color: white;
            z-index: 10;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
            min-width: 10rem;
        }
        .sticky-col-header-1 {
            position: sticky;
            left: 0;
            background-color: #f3f4f6;
            z-index: 21;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
            min-width: 3.5rem;
            width: 3.5rem;
        }
        .sticky-col-header-2 {
            position: sticky;
            left: 3.5rem;
            background-color: #f3f4f6;
            z-index: 21;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
            min-width: 10rem;
        }
        tr:hover .sticky-col-1,
        tr:hover .sticky-col-2 {
            background-color: #f9fafb;
        }
        /* Header sticky vertical */
        .ranking-table thead {
            position: sticky;
            top: 0;
            z-index: 20;
        }
        .ranking-table thead th {
            position: sticky;
            top: 0;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .cursor-pointer {
            cursor: pointer;
        }
        .cursor-pointer:hover {
            background-color: #f0f9ff !important;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">üèÜ Copa Polo 2025 üèÜ</h1>
            <p class="text-lg text-gray-600 mt-2">Resultados y Estad√≠sticas del Torneo</p>
        </header>

        <!-- Pesta√±as de Navegaci√≥n -->
        <div class="mb-8 border-b border-gray-200">
            <nav id="tabs" class="flex flex-wrap -mb-px space-x-4">
                <!-- Las pesta√±as se generar√°n din√°micamente aqu√≠ -->
            </nav>
        </div>

        <!-- Contenido din√°mico -->
        <main id="content-area">
            <!-- El contenido se generar√° din√°micamente aqu√≠ -->
        </main>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>&copy; 2025 Copa Polo. Todos los derechos reservados.</p>
        </footer>
    </div>

    <script>
        // Tus datos JSON directamente aqu√≠
        const tournamentData = {
          "copa_polo": {
            "temporada": "2025",
            "jornadas": [
              {
                "semana": 1,
                "equipos": {
                  "rojo": {"jugadoras": ["Alicia", "Pali", "Jose", "Marta Comadr√°n"], "portera": "Bel√©n"},
                  "negro": {"jugadoras": ["Cristina Maristany", "Julia", "Brugui", "Blanca", "Mare"], "portera": "Mariana"},
                  "blanco": {"jugadoras": ["Elia", "Pati Casas", "Barbi", "Coqui", "Estel"], "portera": "Cande"}
                },
                "resultados": [
                  {"partido": 1, "local": "Rojo", "visitante": "Negro", "resultado": "0-0"},
                  {"partido": 2, "local": "Rojo", "visitante": "Blanco", "resultado": "2-2", "goles": {"Rojo": ["Andrea", "Marta Comadr√°n"], "Blanco": ["Barbi", "Barbi"]}},
                  {"partido": 3, "local": "Negro", "visitante": "Blanco", "resultado": "0-0"},
                  {"partido": 4, "local": "Rojo", "visitante": "Negro", "resultado": "1-0", "goles": {"Rojo": ["Jose"]}},
                  {"partido": 5, "local": "Blanco", "visitante": "Negro", "resultado": "1-0", "goles": {"Blanco": ["Barbi"]}},
                  {"partido": 6, "local": "Blanco", "visitante": "Rojo", "resultado": "2-0", "goles": {"Blanco": ["Barbi", "Barbi (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Blanco", "pj": 4, "g": 2, "e": 2, "p": 0, "gf": 5, "gc": 2, "dg": 3, "puntos": 9, "bonus": 3, "total": 12},
                  {"equipo": "Rojo", "pj": 4, "g": 1, "e": 2, "p": 1, "gf": 3, "gc": 4, "dg": -1, "puntos": 5, "bonus": 0, "total": 5},
                  {"equipo": "Negro", "pj": 4, "g": 0, "e": 2, "p": 2, "gf": 0, "gc": 2, "dg": -2, "puntos": 2, "bonus": 0, "total": 2}
                ],
                "goleadoras": [
                  {"jugadora": "Barbi", "goles": 5, "penaltis": 2},
                  {"jugadora": "Andrea", "goles": 1},
                  {"jugadora": "Marta Comadr√°n", "goles": 1},
                  {"jugadora": "Jose", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [{"jugadora": "Barbi", "equipo": "Blanco", "cantidad": 2}],
                  "cometidos": [{"jugadora": "Cristina Maristany", "equipo": "Negro", "cantidad": 1}, {"jugadora": "Jose", "equipo": "Rojo", "cantidad": 1}]
                }
              },
              {
                "semana": 2,
                "equipos": {
                  "rojo": {"jugadoras": ["Brugui", "Elia", "Blanca", "Julia Colomina", "Mare", "Pali"], "portera": "Mariana"},
                  "azul": {"jugadoras": ["Alicia", "Marta Comadr√°n", "Jose", "Cristina Maristany", "Andrea", "Estel"], "portera": "Cande"},
                  "amarillo": {"jugadoras": ["Barbi", "Coqui", "Marta Armenteras", "Patricia √Ålvarez", "Pati Casas"], "portera": "Bel√©n"}
                },
                "resultados": [
                    {"partido": 1, "local": "Rojo", "visitante": "Azul", "resultado": "1-0", "goles": {"Rojo": ["Pali (penalti)"]}},
                    {"partido": 2, "local": "Rojo", "visitante": "Amarillo", "resultado": "1-0", "goles": {"Rojo": ["Brugui (penalti)"]}},
                    {"partido": 3, "local": "Azul", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 4, "local": "Azul", "visitante": "Rojo", "resultado": "0-0"},
                    {"partido": 5, "local": "Rojo", "visitante": "Amarillo", "resultado": "2-0", "goles": {"Rojo": ["Julia Colomina (gol doble = 2)"]}},
                    {"partido": 6, "local": "Amarillo", "visitante": "Azul", "resultado": "0-1", "goles": {"Azul": ["Estel"]}},
                    {"partido": 7, "local": "Rojo", "visitante": "Azul", "resultado": "0-2", "goles": {"Azul": ["Jose (penalti)", "Jose"]}},
                    {"partido": 8, "local": "Rojo", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 9, "local": "Azul", "visitante": "Amarillo", "resultado": "0-2", "goles": {"Amarillo": ["Patricia √Ålvarez (penalti)", "Coqui (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Rojo", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 5, "gc": 4, "dg": 1, "puntos": 13, "bonus": 3, "total": 16},
                  {"equipo": "Azul", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 5, "gc": 3, "dg": 2, "puntos": 10, "bonus": 0, "total": 10},
                  {"equipo": "Amarillo", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 2, "gc": 5, "dg": -3, "puntos": 8, "bonus": 0, "total": 8}
                ],
                "goleadoras": [
                  {"jugadora": "Jose", "goles": 2, "penaltis": 1},
                  {"jugadora": "Julia Colomina", "goles": 2},
                  {"jugadora": "Estel", "goles": 1},
                  {"jugadora": "Pali", "goles": 1, "penaltis": 1},
                  {"jugadora": "Brugui", "goles": 1, "penaltis": 1},
                  {"jugadora": "Patricia √Ålvarez", "goles": 1, "penaltis": 1},
                  {"jugadora": "Coqui", "goles": 1, "penaltis": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Pali", "equipo": "Rojo"}, {"jugadora": "Brugui", "equipo": "Rojo"},
                    {"jugadora": "Jose", "equipo": "Azul"}, {"jugadora": "Patricia √Ålvarez", "equipo": "Amarillo"},
                    {"jugadora": "Coqui", "equipo": "Amarillo"}
                  ],
                  "cometidos": [
                    {"jugadora": "Cristina Maristany", "equipo": "Azul"}, {"jugadora": "Barbi", "equipo": "Amarillo"},
                    {"jugadora": "Mare", "equipo": "Rojo"}, {"jugadora": "Andrea", "equipo": "Azul", "cantidad": 2}
                  ]
                }
              },
              {
                "semana": 3,
                "equipos": {
                  "amarillo": {"jugadoras": ["Estel Pecham√©", "Barbi", "Blanca", "Pati Casas", "Mare", "Andrea"], "portera": "Bel√©n"},
                  "azul": {"jugadoras": ["Jose", "Julia", "Brugui", "Cristina Maristany", "Alicia", "Coqui"], "portera": "Cande"},
                  "blanco": {"jugadoras": ["Patricia √Ålvarez", "Marta Armenteras", "Marta Comadr√°n", "Elia", "Pali"], "portera": "Mariana"}
                },
                "resultados": [
                    {"partido": 1, "local": "Azul", "visitante": "Amarillo", "resultado": "0-1", "goles": {"Amarillo": ["Andrea"]}},
                    {"partido": 2, "local": "Blanco", "visitante": "Azul", "resultado": "1-2", "goles": {"Blanco": ["Elia (penalti)"], "Azul": ["Julia", "Jose"]}},
                    {"partido": 3, "local": "Amarillo", "visitante": "Blanco", "resultado": "0-1", "goles": {"Blanco": ["Pali (penalti)"]}},
                    {"partido": 4, "local": "Azul", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 5, "local": "Blanco", "visitante": "Azul", "resultado": "1-1", "goles": {"Blanco": ["Elia"], "Azul": ["Brugui"]}},
                    {"partido": 6, "local": "Blanco", "visitante": "Amarillo", "resultado": "0-1", "goles": {"Amarillo": ["Estel Pecham√© (penalti)"]}},
                    {"partido": 7, "local": "Amarillo", "visitante": "Azul", "resultado": "1-0", "goles": {"Amarillo": ["Blanca (penalti)"]}},
                    {"partido": 8, "local": "Azul", "visitante": "Blanco", "resultado": "2-1", "goles": {"Azul": ["Cristina Maristany", "Coqui"], "Blanco": ["Pali"]}},
                    {"partido": 9, "local": "Amarillo", "visitante": "Blanco", "resultado": "1-3", "goles": {"Amarillo": ["Estel Pecham√©"], "Blanco": ["Pali", "Patricia √Ålvarez", "Elia"]}}
                ],
                "clasificacion": [
                  {"equipo": "Amarillo", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 4, "gc": 4, "dg": 0, "puntos": 8, "bonus": 3, "total": 11},
                  {"equipo": "Azul", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 5, "gc": 5, "dg": 0, "puntos": 6, "bonus": 0, "total": 6},
                  {"equipo": "Blanco", "pj": 6, "g": 2, "e": 1, "p": 3, "gf": 8, "gc": 8, "dg": 0, "puntos": 5, "bonus": 0, "total": 5}
                ],
                "goleadoras": [
                  {"jugadora": "Pali", "goles": 3, "penaltis": 1},
                  {"jugadora": "Elia", "goles": 3, "penaltis": 1},
                  {"jugadora": "Estel Pecham√©", "goles": 2, "penaltis": 1},
                  {"jugadora": "Andrea", "goles": 1},
                  {"jugadora": "Blanca", "goles": 1, "penaltis": 1},
                  {"jugadora": "Julia", "goles": 1},
                  {"jugadora": "Jose", "goles": 1},
                  {"jugadora": "Brugui", "goles": 1},
                  {"jugadora": "Cristina Maristany", "goles": 1},
                  {"jugadora": "Coqui", "goles": 1},
                  {"jugadora": "Patricia √Ålvarez", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Elia", "equipo": "Blanco"}, {"jugadora": "Pali", "equipo": "Blanco"},
                    {"jugadora": "Estel Pecham√©", "equipo": "Amarillo"}, {"jugadora": "Blanca", "equipo": "Amarillo"}
                  ],
                  "cometidos": [
                    {"jugadora": "Julia", "equipo": "Azul"}, {"jugadora": "Pati Casas", "equipo": "Amarillo"},
                    {"jugadora": "Marta Armenteras", "equipo": "Blanco"}, {"jugadora": "Jose", "equipo": "Azul"}
                  ]
                }
              },
              {
                "semana": 4,
                "equipos": {
                  "rojo": {"jugadoras": ["Marta Armenteras", "Patricia √Ålvarez", "Marta Comadr√°n", "Brugui", "Elia"], "portera": "Bel√©n"},
                  "azul": {"jugadoras": ["Pali", "Julia Colomina", "Cristina Maristany", "Mare", "Blanca"], "portera": "Cande"},
                  "blanco": {"jugadoras": ["Julia Corominas", "Jose", "Alicia", "Coqui", "Barbi", "Estel Pecham√©"], "portera": "Mariana"}
                },
                "resultados": [
                    {"partido": 1, "local": "Azul", "visitante": "Blanco", "resultado": "1-0", "goles": {"Azul": ["Pali (penalti)"]}},
                    {"partido": 2, "local": "Rojo", "visitante": "Blanco", "resultado": "0-0"},
                    {"partido": 3, "local": "Rojo", "visitante": "Azul", "resultado": "2-0", "goles": {"Rojo": ["Marta Armenteras", "Patricia √Ålvarez"]}},
                    {"partido": 4, "local": "Blanco", "visitante": "Azul", "resultado": "1-0", "goles": {"Blanco": ["Jose"]}},
                    {"partido": 5, "local": "Rojo", "visitante": "Blanco", "resultado": "0-1", "goles": {"Blanco": ["Julia Corominas (gol doble = 2)"]}},
                    {"partido": 6, "local": "Rojo", "visitante": "Azul", "resultado": "1-0", "goles": {"Rojo": ["Marta Comadr√°n"]}},
                    {"partido": 7, "local": "Azul", "visitante": "Blanco", "resultado": "1-1", "goles": {"Azul": ["Autogol no registrado"], "Blanco": ["Julia Corominas (gol doble = 2)"]}},
                    {"partido": 8, "local": "Rojo", "visitante": "Blanco", "resultado": "1-0", "goles": {"Rojo": ["Brugui (penalti)"]}},
                    {"partido": 9, "local": "Rojo", "visitante": "Azul", "resultado": "1-0", "goles": {"Rojo": ["Elia (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Rojo", "pj": 6, "g": 4, "e": 1, "p": 1, "gf": 6, "gc": 1, "dg": 5, "puntos": 9, "bonus": 3, "total": 12},
                  {"equipo": "Blanco", "pj": 5, "g": 2, "e": 1, "p": 2, "gf": 5, "gc": 5, "dg": 0, "puntos": 5, "bonus": 0, "total": 5},
                  {"equipo": "Azul", "pj": 5, "g": 1, "e": 1, "p": 3, "gf": 2, "gc": 7, "dg": -5, "puntos": 3, "bonus": 0, "total": 3}
                ],
                "goleadoras": [
                  {"jugadora": "Julia Corominas", "goles": 4},
                  {"jugadora": "Marta Armenteras", "goles": 1},
                  {"jugadora": "Patricia √Ålvarez", "goles": 1},
                  {"jugadora": "Marta Comadr√°n", "goles": 1},
                  {"jugadora": "Brugui", "goles": 1, "penaltis": 1},
                  {"jugadora": "Elia", "goles": 1, "penaltis": 1},
                  {"jugadora": "Pali", "goles": 1, "penaltis": 1},
                  {"jugadora": "Jose", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Pali", "equipo": "Azul"}, {"jugadora": "Brugui", "equipo": "Rojo"},
                    {"jugadora": "Elia", "equipo": "Rojo"}
                  ],
                  "cometidos": [
                    {"jugadora": "Cristina Maristany", "equipo": "Azul"}, {"jugadora": "Jose", "equipo": "Blanco"}
                  ]
                }
              },
              {
                "semana": 5,
                "equipos": {
                  "rojo": {"jugadoras": ["Estel Pecham√©", "Coqui", "Marta Comadr√°n", "Elia", "Marta Armenteras"], "portera": "Mariana"},
                  "azul": {"jugadoras": ["Brugui", "Barbi", "Andrea", "Jose", "Cristina Maristany", "Xantal"], "portera": "Cande"},
                  "blanco": {"jugadoras": ["Mare", "Pali", "Julia", "Patricia √Ålvarez", "Alicia", "Blanca"], "portera": "Mariana"}
                },
                "resultados": [
                    {"partido": 1, "local": "Azul", "visitante": "Rojo", "resultado": "1-0", "goles": {"Azul": ["Andrea (penalti)"]}},
                    {"partido": 2, "local": "Rojo", "visitante": "Blanco", "resultado": "0-0"},
                    {"partido": 3, "local": "Azul", "visitante": "Blanco", "resultado": "0-0"},
                    {"partido": 4, "local": "Azul", "visitante": "Rojo", "resultado": "1-1", "goles": {"Azul": ["Jose"], "Rojo": ["Estel Pecham√©"]}},
                    {"partido": 5, "local": "Blanco", "visitante": "Rojo", "resultado": "2-1", "goles": {"Blanco": ["Julia (penalti)", "Patricia √Ålvarez"], "Rojo": ["Estel Pecham√©"]}},
                    {"partido": 6, "local": "Blanco", "visitante": "Azul", "resultado": "1-0", "goles": {"Blanco": ["Pali"]}},
                    {"partido": 7, "local": "Azul", "visitante": "Rojo", "resultado": "1-0", "goles": {"Azul": ["Andrea"]}},
                    {"partido": 8, "local": "Rojo", "visitante": "Blanco", "resultado": "0-1", "goles": {"Blanco": ["Patricia √Ålvarez"]}},
                    {"partido": 9, "local": "Blanco", "visitante": "Azul", "resultado": "1-0", "goles": {"Blanco": ["Julia (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Blanco", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 6, "gc": 3, "dg": 3, "puntos": 8, "bonus": 0, "total": 8},
                  {"equipo": "Azul", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 5, "gc": 3, "dg": 2, "puntos": 8, "bonus": 0, "total": 8},
                  {"equipo": "Rojo", "pj": 6, "g": 0, "e": 3, "p": 3, "gf": 3, "gc": 8, "dg": -5, "puntos": 3, "bonus": 0, "total": 3}
                ],
                "goleadoras": [
                  {"jugadora": "Julia", "goles": 2, "penaltis": 2},
                  {"jugadora": "Andrea", "goles": 2, "penaltis": 1},
                  {"jugadora": "Estel Pecham√©", "goles": 2},
                  {"jugadora": "Patricia √Ålvarez", "goles": 2},
                  {"jugadora": "Jose", "goles": 1},
                  {"jugadora": "Pali", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Andrea", "equipo": "Azul"}, {"jugadora": "Julia", "equipo": "Blanco", "cantidad": 2}
                  ],
                  "cometidos": [
                    {"jugadora": "Marta Armenteras", "equipo": "Rojo"}, {"jugadora": "Marta Armenteras", "equipo": "Rojo"}, {"jugadora": "Jose", "equipo": "Azul"}
                  ]
                }
              }
            ],
            "ranking_individual": [
              {"jugadora": "Elia", "puntos": 49, "goles": 6, "penaltis_marcados": 3},
              {"jugadora": "Barbi", "puntos": 48, "goles": 5, "penaltis_marcados": 2, "penaltis_cometidos": 1},
              {"jugadora": "Brugui", "puntos": 44, "goles": 3, "penaltis_marcados": 2},
              {"jugadora": "Julia", "puntos": 41, "goles": 9, "penaltis_marcados": 2, "penaltis_cometidos": 1},
              {"jugadora": "Patricia √Ålvarez", "puntos": 41, "goles": 5, "penaltis_marcados": 1},
              {"jugadora": "Mare", "puntos": 38, "penaltis_cometidos": 1},
              {"jugadora": "Blanca", "puntos": 38, "goles": 1, "penaltis_marcados": 1},
              {"jugadora": "Cande (p.)", "puntos": 37},
              {"jugadora": "Estel Pecham√©", "puntos": 37, "goles": 5, "penaltis_marcados": 1},
              {"jugadora": "Bel√©n (p.)", "puntos": 36},
              {"jugadora": "Marta Comadr√°n", "puntos": 35, "goles": 2},
              {"jugadora": "Pali", "puntos": 35, "goles": 6, "penaltis_marcados": 3},
              {"jugadora": "Cristina Maristany", "puntos": 33, "goles": 1, "penaltis_cometidos": 3},
              {"jugadora": "Mariana (p.)", "puntos": 32},
              {"jugadora": "Pati Casas", "puntos": 31, "penaltis_cometidos": 1},
              {"jugadora": "Coqui", "puntos": 30, "goles": 2, "penaltis_marcados": 1},
              {"jugadora": "Jose", "puntos": 30, "goles": 6, "penaltis_marcados": 1, "penaltis_cometidos": 4},
              {"jugadora": "Alicia", "puntos": 30},
              {"jugadora": "Andrea", "puntos": 29, "goles": 4, "penaltis_marcados": 1, "penaltis_cometidos": 2},
              {"jugadora": "Marta Armenteras", "puntos": 28, "goles": 1, "penaltis_cometidos": 3},
              {"jugadora": "Xantal", "puntos": 8}
            ]
          }
        };

        const contentArea = document.getElementById('content-area');
        const tabsContainer = document.getElementById('tabs');

        const teamColorMap = {
            Rojo: 'rojo',
            Negro: 'negro',
            Blanco: 'blanco',
            Azul: 'azul',
            Amarillo: 'amarillo'
        };

        const getTeamClass = (teamName) => `team-${teamColorMap[teamName] || 'gray-500'}`;

        function renderJornada(semana) {
            const jornada = tournamentData.copa_polo.jornadas.find(j => j.semana === semana);
            if (!jornada) return;

            let contentHTML = `
                <div class="space-y-10">
                    <!-- Equipos -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Equipos de la Jornada ${semana}</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${Object.entries(jornada.equipos).map(([color, equipo]) => `
                                <div class="rounded-lg shadow-md p-4 ${getTeamClass(color.charAt(0).toUpperCase() + color.slice(1))}">
                                    <h3 class="text-xl font-bold mb-2">${color.charAt(0).toUpperCase() + color.slice(1)}</h3>
                                    <p><b>Portera:</b> ${equipo.portera}</p>
                                    <ul class="list-disc list-inside mt-1">
                                        ${equipo.jugadoras.map(j => `<li>${j}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Resultados -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Resultados</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                           <div class="divide-y divide-gray-200">
                                ${jornada.resultados.map(r => `
                                    <div class="p-4">
                                        <div class="flex justify-between items-center">
                                            <div class="flex-1 text-right pr-4">
                                                <span class="font-semibold">${r.local}</span>
                                                <span class="inline-block w-6 h-4 rounded ml-2 ${getTeamClass(r.local)}"></span>
                                            </div>
                                            <div class="font-bold text-lg px-2 bg-gray-100 rounded">${r.resultado}</div>
                                            <div class="flex-1 text-left pl-4">
                                                <span class="inline-block w-6 h-4 rounded mr-2 ${getTeamClass(r.visitante)}"></span>
                                                <span class="font-semibold">${r.visitante}</span>
                                            </div>
                                        </div>
                                        ${r.goles ? `
                                            <div class="text-xs text-gray-500 mt-2 text-center">
                                                ${Object.entries(r.goles).map(([equipo, goleadoras]) => `
                                                    <span><b>${equipo}:</b> ${goleadoras.join(', ')}</span>
                                                `).join(' &nbsp;|&nbsp; ')}
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                           </div>
                        </div>
                    </div>

                    <!-- Clasificaci√≥n -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Clasificaci√≥n</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                            <table class="min-w-full text-sm text-left">
                                <thead class="bg-gray-100 text-gray-600 uppercase">
                                    <tr>
                                        <th class="p-3">#</th>
                                        <th class="p-3">Equipo</th>
                                        <th class="p-3 text-center">PJ</th><th class="p-3 text-center">G</th><th class="p-3 text-center">E</th><th class="p-3 text-center">P</th>
                                        <th class="p-3 text-center">GF</th><th class="p-3 text-center">GC</th><th class="p-3 text-center">DG</th>
                                        <th class="p-3 text-center">Pts</th><th class="p-3 text-center">Bonus</th><th class="p-3 font-bold text-center">Total</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    ${jornada.clasificacion.map((c, i) => `
                                        <tr class="hover:bg-gray-50">
                                            <td class="p-3 font-semibold">${i + 1}</td>
                                            <td class="p-3 font-semibold flex items-center"><span class="inline-block w-5 h-3 rounded mr-2 ${getTeamClass(c.equipo)}"></span>${c.equipo}</td>
                                            <td class="p-3 text-center">${c.pj}</td><td class="p-3 text-center">${c.g}</td><td class="p-3 text-center">${c.e}</td><td class="p-3 text-center">${c.p}</td>
                                            <td class="p-3 text-center">${c.gf}</td><td class="p-3 text-center">${c.gc}</td><td class="p-3 text-center">${c.dg}</td>
                                            <td class="p-3 text-center">${c.puntos}</td><td class="p-3 text-center">${c.bonus}</td><td class="p-3 font-bold text-center">${c.total}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Goleadoras y Penaltis -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Goleadoras -->
                        <div class="md:col-span-1">
                            <h3 class="text-xl font-bold mb-3">Goleadoras</h3>
                            <div class="bg-white rounded-lg shadow-md p-4 space-y-3">
                                ${jornada.goleadoras.map(g => `
                                    <div class="flex justify-between items-center">
                                        <span>${g.jugadora}</span>
                                        <span class="font-bold bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">${g.goles} ${g.penaltis ? `(${g.penaltis}p)`: ''}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <!-- Penaltis -->
                        <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
                           <div>
                                <h3 class="text-xl font-bold mb-3">Penaltis Marcados</h3>
                                <div class="bg-white rounded-lg shadow-md p-4 space-y-2">
                                    ${jornada.penaltis.marcados.map(p => `
                                        <p>${p.jugadora} <span class="text-xs text-gray-500">(${p.equipo})</span></p>
                                    `).join('')}
                                </div>
                           </div>
                           <div>
                                <h3 class="text-xl font-bold mb-3">Penaltis Cometidos</h3>
                                <div class="bg-white rounded-lg shadow-md p-4 space-y-2">
                                     ${jornada.penaltis.cometidos.map(p => `
                                        <p>${p.jugadora} <span class="text-xs text-gray-500">(${p.equipo}) ${p.cantidad > 1 ? `x${p.cantidad}`: ''}</span></p>
                                    `).join('')}
                                </div>
                           </div>
                        </div>
                    </div>
                </div>
            `;
            contentArea.innerHTML = contentHTML;
        }
        
        function togglePlayerStats(playerId) {
            const detailRow = document.getElementById(`detail-${playerId}`);
            const allDetails = document.querySelectorAll('[id^="detail-"]');
            
            // Cerrar todos los dem√°s detalles
            allDetails.forEach(row => {
                if (row.id !== `detail-${playerId}`) {
                    row.classList.add('hidden');
                }
            });
            
            // Toggle el detalle actual
            detailRow.classList.toggle('hidden');
        }

        function calcularDesglose(jugadora) {
            const jornadas = tournamentData.copa_polo.jornadas;
            const nombreLimpio = jugadora.jugadora.replace(' (p.)', '');
            const desglosePorJornada = [];
            
            // Normalizar nombre para comparaciones
            const normalizarNombre = (nombre) => {
                if (nombre === 'Julia Colomina' || nombre === 'Julia Corominas') return 'Julia';
                if (nombre === 'Estel Pecham√©' || nombre === 'Estel') return 'Estel Pecham√©';
                if (nombre === 'Patricia √Ålvarez' || nombre === 'Patri √Ålvarez') return 'Patricia √Ålvarez';
                if (nombre === 'Coma') return 'Marta Comadr√°n';
                return nombre;
            };
            
            const nombreNormalizado = normalizarNombre(nombreLimpio);
            
            jornadas.forEach(jornada => {
                // Buscar en qu√© equipo jug√≥ esta jugadora
                for (const [colorEquipo, equipoData] of Object.entries(jornada.equipos)) {
                    const jugadorasEquipo = [...equipoData.jugadoras, equipoData.portera].map(n => normalizarNombre(n));
                    
                    if (jugadorasEquipo.includes(nombreNormalizado)) {
                        // Encontrar los puntos del equipo en la clasificaci√≥n
                        const equipoNombre = colorEquipo.charAt(0).toUpperCase() + colorEquipo.slice(1);
                        const clasificacionEquipo = jornada.clasificacion.find(c => c.equipo === equipoNombre);
                        
                        if (clasificacionEquipo) {
                            desglosePorJornada.push({
                                semana: jornada.semana,
                                equipo: equipoNombre,
                                puntos: clasificacionEquipo.total
                            });
                        }
                        break;
                    }
                }
            });
            
            return desglosePorJornada;
        }

        let currentSort = 'puntos'; // 'puntos' o 'media'

        function sortRanking(ranking, sortBy) {
            const sorted = [...ranking];
            if (sortBy === 'puntos') {
                sorted.sort((a, b) => b.puntos - a.puntos);
            } else if (sortBy === 'media') {
                sorted.sort((a, b) => {
                    const mediaA = a.jornadas_disputadas ? a.puntos / a.jornadas_disputadas : 0;
                    const mediaB = b.jornadas_disputadas ? b.puntos / b.jornadas_disputadas : 0;
                    return mediaB - mediaA;
                });
            }
            return sorted;
        }

        function renderRankingIndividual(sortBy = 'puntos') {
            currentSort = sortBy;
            const ranking = sortRanking(tournamentData.copa_polo.ranking_individual, sortBy);
            
            let contentHTML = `
                <div>
                    <h2 class="text-2xl font-bold mb-4">Ranking Individual</h2>
                    <p class="text-sm text-gray-600 mb-2">üí° Los puntos son la suma de los puntos del equipo en cada jornada jugada. Haz clic en cualquier jugadora para ver el desglose detallado.</p>
                    <div class="mb-4 flex gap-2">
                        <button onclick="renderRankingIndividual('puntos')" 
                                class="px-4 py-2 rounded ${sortBy === 'puntos' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            Ordenar por Puntos
                        </button>
                        <button onclick="renderRankingIndividual('media')" 
                                class="px-4 py-2 rounded ${sortBy === 'media' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300'}">
                            Ordenar por Pts/Partido
                        </button>
                    </div>
                    <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                        <table class="min-w-full text-sm text-left ranking-table">
                            <thead class="bg-gray-100 text-gray-600 uppercase">
                                <tr>
                                    <th class="p-3 sticky-col-header-1">#</th>
                                    <th class="p-3 sticky-col-header-2">Jugadora</th>
                                    <th class="p-3 text-center">Puntos</th>
                                    <th class="p-3 text-center">Jornadas</th>
                                    <th class="p-3 text-center">Pts/Partido</th>
                                    <th class="p-3 text-center">Goles</th>
                                    <th class="p-3 text-center">P. Provocados</th>
                                    <th class="p-3 text-center">P. Cometidos</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                ${ranking.map((r, i) => {
                                    const media = r.jornadas_disputadas ? (r.puntos / r.jornadas_disputadas).toFixed(2) : '0.00';
                                    const desglose = calcularDesglose(r);
                                    return `
                                    <tr class="hover:bg-gray-50 cursor-pointer" onclick="togglePlayerStats(${i})">
                                        <td class="p-3 font-semibold sticky-col-1">${i + 1}</td>
                                        <td class="p-3 font-semibold sticky-col-2">${r.jugadora}</td>
                                        <td class="p-3 text-center font-bold">${r.puntos}</td>
                                        <td class="p-3 text-center">${r.jornadas_disputadas || 0}</td>
                                        <td class="p-3 text-center font-bold text-green-600">${media}</td>
                                        <td class="p-3 text-center">${r.goles || 0}</td>
                                        <td class="p-3 text-center">${r.penaltis_marcados || 0}</td>
                                        <td class="p-3 text-center">${r.penaltis_cometidos || 0}</td>
                                    </tr>
                                    <tr id="detail-${i}" class="hidden bg-blue-50">
                                        <td colspan="8" class="p-4">
                                            <div class="text-sm space-y-2">
                                                <h4 class="font-bold text-gray-700 mb-3">üìä Desglose de puntos - ${r.jugadora}</h4>
                                                ${desglose.length > 0 ? `
                                                    <div class="grid grid-cols-1 md:grid-cols-${Math.min(desglose.length, 4)} gap-3 mb-3">
                                                        ${desglose.map(j => `
                                                            <div class="bg-white p-3 rounded shadow-sm">
                                                                <p class="text-xs text-gray-500 font-semibold">Jornada ${j.semana}</p>
                                                                <p class="text-sm text-gray-600">Equipo <span class="font-semibold">${j.equipo}</span></p>
                                                                <p class="text-xl font-bold text-blue-600">+${j.puntos}</p>
                                                            </div>
                                                        `).join('')}
                                                    </div>
                                                    <div class="bg-white p-3 rounded shadow-sm">
                                                        <div class="flex justify-between items-center">
                                                            <div>
                                                                <p class="text-sm text-gray-600">
                                                                    ${r.goles ? `‚öΩ ${r.goles} goles` : ''}
                                                                    ${r.goles && r.penaltis_marcados ? ' ‚Ä¢ ' : ''}
                                                                    ${r.penaltis_marcados ? `üéØ ${r.penaltis_marcados} penaltis provocados` : ''}
                                                                    ${(r.goles || r.penaltis_marcados) && r.penaltis_cometidos ? ' ‚Ä¢ ' : ''}
                                                                    ${r.penaltis_cometidos ? `‚ö†Ô∏è ${r.penaltis_cometidos} penaltis cometidos` : ''}
                                                                </p>
                                                            </div>
                                                            <div class="text-right">
                                                                <p class="text-xs text-gray-500">Total acumulado</p>
                                                                <p class="text-2xl font-bold text-blue-600">${r.puntos} pts</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ` : '<p class="text-gray-500">No hay datos disponibles</p>'}
                                            </div>
                                        </td>
                                    </tr>
                                    `;
                                }).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
             contentArea.innerHTML = contentHTML;
        }

        function switchTab(tabId, buttonEl) {
            document.querySelectorAll('#tabs button').forEach(b => b.classList.remove('tab-active'));
            buttonEl.classList.add('tab-active');

            if (tabId === 'ranking') {
                renderRankingIndividual(currentSort);
            } else {
                const semana = parseInt(tabId.split('-')[1]);
                renderJornada(semana);
            }
        }

        function initialize() {
            const { jornadas } = tournamentData.copa_polo;

            // --- C√ÅLCULO DE JORNADAS DISPUTADAS ---
            const playerParticipation = {};
            const normalizeName = (name) => {
                if (name === 'Julia Colomina') return 'Julia';
                if (name === 'Julia Corominas') return 'Julia';
                if (name === 'Estel Pecham√©') return 'Estel Pecham√©';
                if (name === 'Estel') return 'Estel Pecham√©';
                if (name === 'Patricia √Ålvarez') return 'Patricia √Ålvarez';
                if (name === 'Patri √Ålvarez') return 'Patricia √Ålvarez';
                if (name === 'Coma') return 'Marta Comadr√°n';
                return name;
            };

            jornadas.forEach(jornada => {
                const playersInJornada = new Set();
                Object.values(jornada.equipos).forEach(equipo => {
                    equipo.jugadoras.forEach(nombre => playersInJornada.add(normalizeName(nombre)));
                    playersInJornada.add(normalizeName(equipo.portera));
                });
                
                // A√±adir a Andrea en la Jornada 1 por el gol marcado
                if (jornada.semana === 1) {
                    playersInJornada.add('Andrea');
                }

                playersInJornada.forEach(player => {
                    playerParticipation[player] = (playerParticipation[player] || 0) + 1;
                });
            });

            // A√±adir el recuento de participaci√≥n al ranking
            let ranking = tournamentData.copa_polo.ranking_individual;
            ranking.forEach(p => {
                const cleanName = p.jugadora.replace(' (p.)', '');
                const normalizedName = normalizeName(cleanName);
                p.jornadas_disputadas = playerParticipation[normalizedName] || 0;
            });
            // --- FIN DEL C√ÅLCULO ---

            // Crear pesta√±as para jornadas
            jornadas.forEach(j => {
                const button = document.createElement('button');
                button.textContent = `Jornada ${j.semana}`;
                button.className = 'text-lg font-medium py-3 px-1 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300';
                button.onclick = () => switchTab(`jornada-${j.semana}`, button);
                tabsContainer.appendChild(button);
            });
            
            // Crear pesta√±a para el ranking
            if (ranking) {
                const button = document.createElement('button');
                button.textContent = `Ranking Individual`;
                button.className = 'text-lg font-medium py-3 px-1 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300';
                button.onclick = () => switchTab('ranking', button);
                tabsContainer.appendChild(button);
            }

            // Mostrar la √∫ltima jornada por defecto
            const lastJornada = jornadas[jornadas.length - 1];
            if(lastJornada) {
                const firstButton = tabsContainer.querySelector('button');
                switchTab(`jornada-${jornadas[0].semana}`, firstButton);
            }
        }
        
        // Iniciar la aplicaci√≥n cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', initialize);

    </script>
</body>
</html>

