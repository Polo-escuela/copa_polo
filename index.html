<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados del Torneo - Copa Polo 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .team-rojo { background-color: #ef4444; color: white; }
        .team-negro { background-color: #1f2937; color: white; }
        .team-blanco { background-color: #f9fafb; color: #1f2937; border: 1px solid #d1d5db; }
        .team-azul { background-color: #3b82f6; color: white; }
        .team-amarillo { background-color: #f59e0b; color: white; }
        .tab-active {
            border-color: #3b82f6;
            color: #3b82f6;
            background-color: #eff6ff;
        }
        .sticky-col-1 {
            position: sticky;
            left: 0;
            background-color: white;
            z-index: 10;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
            min-width: 3.5rem;
            width: 3.5rem;
        }
        .sticky-col-2 {
            position: sticky;
            left: 3.5rem; /* Ancho de la primera columna (#) */
            background-color: white;
            z-index: 10;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
            min-width: 10rem;
        }
        .sticky-col-header-1 {
            position: sticky;
            left: 0;
            background-color: #f3f4f6;
            z-index: 11;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.05);
            min-width: 3.5rem;
            width: 3.5rem;
        }
        .sticky-col-header-2 {
            position: sticky;
            left: 3.5rem;
            background-color: #f3f4f6;
            z-index: 11;
            box-shadow: 2px 0 4px rgba(0, 0, 0, 0.1);
            min-width: 10rem;
        }
        tr:hover .sticky-col-1,
        tr:hover .sticky-col-2 {
            background-color: #f9fafb;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900">üèÜ Copa Polo 2025 üèÜ</h1>
            <p class="text-lg text-gray-600 mt-2">Resultados y Estad√≠sticas del Torneo</p>
        </header>

        <!-- Pesta√±as de Navegaci√≥n -->
        <div class="mb-8 border-b border-gray-200">
            <nav id="tabs" class="flex flex-wrap -mb-px space-x-4">
                <!-- Las pesta√±as se generar√°n din√°micamente aqu√≠ -->
            </nav>
        </div>

        <!-- Contenido din√°mico -->
        <main id="content-area">
            <!-- El contenido se generar√° din√°micamente aqu√≠ -->
        </main>

        <footer class="text-center mt-12 text-gray-500 text-sm">
            <p>&copy; 2025 Copa Polo. Todos los derechos reservados.</p>
        </footer>
    </div>

    <script>
        // Tus datos JSON directamente aqu√≠
        const tournamentData = {
          "copa_polo": {
            "temporada": "2025",
            "jornadas": [
              {
                "semana": 1,
                "equipos": {
                  "rojo": {"jugadoras": ["Alicia", "Pali", "Jose", "Coma"], "portera": "Bel√©n"},
                  "negro": {"jugadoras": ["Cristina Maristany", "Julia", "Brugui", "Blanca", "Mare"], "portera": "Mariana"},
                  "blanco": {"jugadoras": ["Elia", "Pati Casas", "Barbi", "Coqui", "Estel"], "portera": "Cande"}
                },
                "resultados": [
                  {"partido": 1, "local": "Rojo", "visitante": "Negro", "resultado": "0-0"},
                  {"partido": 2, "local": "Rojo", "visitante": "Blanco", "resultado": "2-2", "goles": {"Rojo": ["Andrea", "Coma"], "Blanco": ["Barbi", "Barbi"]}},
                  {"partido": 3, "local": "Negro", "visitante": "Blanco", "resultado": "0-0"},
                  {"partido": 4, "local": "Rojo", "visitante": "Negro", "resultado": "1-0", "goles": {"Rojo": ["Jose"]}},
                  {"partido": 5, "local": "Blanco", "visitante": "Negro", "resultado": "1-0", "goles": {"Blanco": ["Barbi"]}},
                  {"partido": 6, "local": "Blanco", "visitante": "Rojo", "resultado": "2-0", "goles": {"Blanco": ["Barbi", "Barbi (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Blanco", "pj": 4, "g": 2, "e": 2, "p": 0, "gf": 5, "gc": 2, "dg": 3, "puntos": 9, "bonus": 3, "total": 12},
                  {"equipo": "Rojo", "pj": 4, "g": 1, "e": 2, "p": 1, "gf": 3, "gc": 4, "dg": -1, "puntos": 5, "bonus": 0, "total": 5},
                  {"equipo": "Negro", "pj": 4, "g": 0, "e": 2, "p": 2, "gf": 0, "gc": 2, "dg": -2, "puntos": 2, "bonus": 0, "total": 2}
                ],
                "goleadoras": [
                  {"jugadora": "Barbi", "goles": 5, "penaltis": 2},
                  {"jugadora": "Andrea", "goles": 1},
                  {"jugadora": "Coma", "goles": 1},
                  {"jugadora": "Jose", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [{"jugadora": "Barbi", "equipo": "Blanco", "cantidad": 2}],
                  "cometidos": [{"jugadora": "Cristina Maristany", "equipo": "Negro", "cantidad": 1}, {"jugadora": "Jose", "equipo": "Rojo", "cantidad": 1}]
                }
              },
              {
                "semana": 2,
                "equipos": {
                  "rojo": {"jugadoras": ["Brugui", "Elia", "Blanca", "Julia Colomina", "Mare", "Pali"], "portera": "Mariana"},
                  "azul": {"jugadoras": ["Alicia", "Coma", "Jose", "Cristina Maristany", "Andrea", "Estel"], "portera": "Cande"},
                  "amarillo": {"jugadoras": ["Barbi", "Coqui", "Marta Armenteras", "Patri √Ålvarez", "Pati Casas"], "portera": "Bel√©n"}
                },
                "resultados": [
                    {"partido": 1, "local": "Rojo", "visitante": "Azul", "resultado": "1-0", "goles": {"Rojo": ["Pali (penalti)"]}},
                    {"partido": 2, "local": "Rojo", "visitante": "Amarillo", "resultado": "1-0", "goles": {"Rojo": ["Brugui (penalti)"]}},
                    {"partido": 3, "local": "Azul", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 4, "local": "Azul", "visitante": "Rojo", "resultado": "0-0"},
                    {"partido": 5, "local": "Rojo", "visitante": "Amarillo", "resultado": "2-0", "goles": {"Rojo": ["Julia Colomina (gol doble = 2)"]}},
                    {"partido": 6, "local": "Amarillo", "visitante": "Azul", "resultado": "0-1", "goles": {"Azul": ["Estel"]}},
                    {"partido": 7, "local": "Rojo", "visitante": "Azul", "resultado": "0-2", "goles": {"Azul": ["Jose (penalti)", "Jose"]}},
                    {"partido": 8, "local": "Rojo", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 9, "local": "Azul", "visitante": "Amarillo", "resultado": "0-2", "goles": {"Amarillo": ["Patri √Ålvarez (penalti)", "Coqui (penalti)"]}}
                ],
                "clasificacion": [
                  {"equipo": "Rojo", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 5, "gc": 4, "dg": 1, "puntos": 13, "bonus": 3, "total": 16},
                  {"equipo": "Azul", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 5, "gc": 3, "dg": 2, "puntos": 10, "bonus": 0, "total": 10},
                  {"equipo": "Amarillo", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 2, "gc": 5, "dg": -3, "puntos": 8, "bonus": 0, "total": 8}
                ],
                "goleadoras": [
                  {"jugadora": "Jose", "goles": 2, "penaltis": 1},
                  {"jugadora": "Julia Colomina", "goles": 2},
                  {"jugadora": "Estel", "goles": 1},
                  {"jugadora": "Pali", "goles": 1, "penaltis": 1},
                  {"jugadora": "Brugui", "goles": 1, "penaltis": 1},
                  {"jugadora": "Patri √Ålvarez", "goles": 1, "penaltis": 1},
                  {"jugadora": "Coqui", "goles": 1, "penaltis": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Pali", "equipo": "Rojo"}, {"jugadora": "Brugui", "equipo": "Rojo"},
                    {"jugadora": "Jose", "equipo": "Azul"}, {"jugadora": "Patri √Ålvarez", "equipo": "Amarillo"},
                    {"jugadora": "Coqui", "equipo": "Amarillo"}
                  ],
                  "cometidos": [
                    {"jugadora": "Cristina Maristany", "equipo": "Azul"}, {"jugadora": "Barbi", "equipo": "Amarillo"},
                    {"jugadora": "Mare", "equipo": "Rojo"}, {"jugadora": "Andrea", "equipo": "Azul", "cantidad": 2}
                  ]
                }
              },
              {
                "semana": 3,
                "equipos": {
                  "amarillo": {"jugadoras": ["Estel Pecham√©", "Barbi", "Blanca", "Pati Casas", "Mare", "Andrea"], "portera": "Bel√©n"},
                  "azul": {"jugadoras": ["Jose", "Julia", "Brugui", "Cristina Maristany", "Alicia", "Coqui"], "portera": "Cande"},
                  "blanco": {"jugadoras": ["Patri √Ålvarez", "Marta Armenteras", "Coma", "Elia", "Pali"], "portera": "Mariana"}
                },
                "resultados": [
                    {"partido": 1, "local": "Azul", "visitante": "Amarillo", "resultado": "0-1", "goles": {"Amarillo": ["Andrea"]}},
                    {"partido": 2, "local": "Blanco", "visitante": "Azul", "resultado": "1-2", "goles": {"Blanco": ["Elia (penalti)"], "Azul": ["Julia", "Jose"]}},
                    {"partido": 3, "local": "Amarillo", "visitante": "Blanco", "resultado": "0-1", "goles": {"Blanco": ["Pali (penalti)"]}},
                    {"partido": 4, "local": "Azul", "visitante": "Amarillo", "resultado": "0-0"},
                    {"partido": 5, "local": "Blanco", "visitante": "Azul", "resultado": "1-1", "goles": {"Blanco": ["Elia"], "Azul": ["Brugui"]}},
                    {"partido": 6, "local": "Blanco", "visitante": "Amarillo", "resultado": "0-1", "goles": {"Amarillo": ["Estel Pecham√© (penalti)"]}},
                    {"partido": 7, "local": "Amarillo", "visitante": "Azul", "resultado": "1-0", "goles": {"Amarillo": ["Blanca (penalti)"]}},
                    {"partido": 8, "local": "Azul", "visitante": "Blanco", "resultado": "2-1", "goles": {"Azul": ["Cristina Maristany", "Coqui"], "Blanco": ["Pali"]}},
                    {"partido": 9, "local": "Amarillo", "visitante": "Blanco", "resultado": "1-2", "goles": {"Amarillo": ["Estel Pecham√©"], "Blanco": ["Pali", "Patri √Ålvarez"]}}
                ],
                "clasificacion": [
                  {"equipo": "Amarillo", "pj": 6, "g": 3, "e": 2, "p": 1, "gf": 4, "gc": 3, "dg": 1, "puntos": 8, "bonus": 3, "total": 11},
                  {"equipo": "Azul", "pj": 6, "g": 2, "e": 2, "p": 2, "gf": 5, "gc": 5, "dg": 0, "puntos": 6, "bonus": 0, "total": 6},
                  {"equipo": "Blanco", "pj": 6, "g": 2, "e": 1, "p": 3, "gf": 7, "gc": 8, "dg": -1, "puntos": 5, "bonus": 0, "total": 5}
                ],
                "goleadoras": [
                  {"jugadora": "Estel Pecham√©", "goles": 2, "penaltis": 1},
                  {"jugadora": "Pali", "goles": 3, "penaltis": 1},
                  {"jugadora": "Elia", "goles": 2, "penaltis": 1},
                  {"jugadora": "Andrea", "goles": 1},
                  {"jugadora": "Blanca", "goles": 1, "penaltis": 1},
                  {"jugadora": "Julia", "goles": 1},
                  {"jugadora": "Jose", "goles": 1},
                  {"jugadora": "Brugui", "goles": 1},
                  {"jugadora": "Cristina Maristany", "goles": 1},
                  {"jugadora": "Coqui", "goles": 1},
                  {"jugadora": "Patri √Ålvarez", "goles": 1}
                ],
                "penaltis": {
                  "marcados": [
                    {"jugadora": "Elia", "equipo": "Blanco"}, {"jugadora": "Pali", "equipo": "Blanco"},
                    {"jugadora": "Estel Pecham√©", "equipo": "Amarillo"}, {"jugadora": "Blanca", "equipo": "Amarillo"}
                  ],
                  "cometidos": [
                    {"jugadora": "Julia", "equipo": "Azul"}, {"jugadora": "Pati Casas", "equipo": "Amarillo"},
                    {"jugadora": "Marta Armenteras", "equipo": "Blanco"}, {"jugadora": "Jose", "equipo": "Azul"}
                  ]
                }
              }
            ],
            "ranking_individual": [
              {"jugadora": "Elia", "puntos": 33, "goles": 4, "penaltis_marcados": 2},
              {"jugadora": "Estel Pecham√©", "puntos": 33, "goles": 3, "penaltis_marcados": 1},
              {"jugadora": "Barbi", "puntos": 31, "goles": 5, "penaltis_marcados": 2, "penaltis_cometidos": 1},
              {"jugadora": "Pati Casas", "puntos": 31, "penaltis_cometidos": 1},
              {"jugadora": "Blanca", "puntos": 29, "goles": 1, "penaltis_marcados": 1},
              {"jugadora": "Mare", "puntos": 29, "penaltis_cometidos": 1},
              {"jugadora": "Cande (p.)", "puntos": 28},
              {"jugadora": "Pali", "puntos": 26, "goles": 4, "penaltis_marcados": 2},
              {"jugadora": "Coqui", "puntos": 26, "goles": 2, "penaltis_marcados": 1},
              {"jugadora": "Julia", "puntos": 24, "goles": 3, "penaltis_cometidos": 1},
              {"jugadora": "Brugui", "puntos": 24, "goles": 2, "penaltis_marcados": 1},
              {"jugadora": "Bel√©n (p.)", "puntos": 24},
              {"jugadora": "Cristina Maristany", "puntos": 24, "goles": 1, "penaltis_cometidos": 2},
              {"jugadora": "Mariana (p.)", "puntos": 23},
              {"jugadora": "Alicia", "puntos": 21},
              {"jugadora": "Jose", "puntos": 21, "goles": 4, "penaltis_marcados": 1, "penaltis_cometidos": 2},
              {"jugadora": "Andrea", "puntos": 21, "goles": 2, "penaltis_cometidos": 2},
              {"jugadora": "Coma", "puntos": 20, "goles": 1},
              {"jugadora": "Marta Armenteras", "puntos": 13, "penaltis_cometidos": 1},
              {"jugadora": "Patri √Ålvarez", "puntos": 13, "goles": 2, "penaltis_marcados": 1}
            ]
          }
        };

        const contentArea = document.getElementById('content-area');
        const tabsContainer = document.getElementById('tabs');

        const teamColorMap = {
            Rojo: 'rojo',
            Negro: 'negro',
            Blanco: 'blanco',
            Azul: 'azul',
            Amarillo: 'amarillo'
        };

        const getTeamClass = (teamName) => `team-${teamColorMap[teamName] || 'gray-500'}`;

        function renderJornada(semana) {
            const jornada = tournamentData.copa_polo.jornadas.find(j => j.semana === semana);
            if (!jornada) return;

            let contentHTML = `
                <div class="space-y-10">
                    <!-- Equipos -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Equipos de la Jornada ${semana}</h2>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            ${Object.entries(jornada.equipos).map(([color, equipo]) => `
                                <div class="rounded-lg shadow-md p-4 ${getTeamClass(color.charAt(0).toUpperCase() + color.slice(1))}">
                                    <h3 class="text-xl font-bold mb-2">${color.charAt(0).toUpperCase() + color.slice(1)}</h3>
                                    <p><b>Portera:</b> ${equipo.portera}</p>
                                    <ul class="list-disc list-inside mt-1">
                                        ${equipo.jugadoras.map(j => `<li>${j}</li>`).join('')}
                                    </ul>
                                </div>
                            `).join('')}
                        </div>
                    </div>

                    <!-- Resultados -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Resultados</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-hidden">
                           <div class="divide-y divide-gray-200">
                                ${jornada.resultados.map(r => `
                                    <div class="p-4">
                                        <div class="flex justify-between items-center">
                                            <div class="flex-1 text-right pr-4">
                                                <span class="font-semibold">${r.local}</span>
                                                <span class="inline-block w-6 h-4 rounded ml-2 ${getTeamClass(r.local)}"></span>
                                            </div>
                                            <div class="font-bold text-lg px-2 bg-gray-100 rounded">${r.resultado}</div>
                                            <div class="flex-1 text-left pl-4">
                                                <span class="inline-block w-6 h-4 rounded mr-2 ${getTeamClass(r.visitante)}"></span>
                                                <span class="font-semibold">${r.visitante}</span>
                                            </div>
                                        </div>
                                        ${r.goles ? `
                                            <div class="text-xs text-gray-500 mt-2 text-center">
                                                ${Object.entries(r.goles).map(([equipo, goleadoras]) => `
                                                    <span><b>${equipo}:</b> ${goleadoras.join(', ')}</span>
                                                `).join(' &nbsp;|&nbsp; ')}
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                           </div>
                        </div>
                    </div>

                    <!-- Clasificaci√≥n -->
                    <div>
                        <h2 class="text-2xl font-bold mb-4">Clasificaci√≥n</h2>
                        <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                            <table class="min-w-full text-sm text-left">
                                <thead class="bg-gray-100 text-gray-600 uppercase">
                                    <tr>
                                        <th class="p-3">#</th>
                                        <th class="p-3">Equipo</th>
                                        <th class="p-3 text-center">PJ</th><th class="p-3 text-center">G</th><th class="p-3 text-center">E</th><th class="p-3 text-center">P</th>
                                        <th class="p-3 text-center">GF</th><th class="p-3 text-center">GC</th><th class="p-3 text-center">DG</th>
                                        <th class="p-3 text-center">Pts</th><th class="p-3 text-center">Bonus</th><th class="p-3 font-bold text-center">Total</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-gray-200">
                                    ${jornada.clasificacion.map((c, i) => `
                                        <tr class="hover:bg-gray-50">
                                            <td class="p-3 font-semibold">${i + 1}</td>
                                            <td class="p-3 font-semibold flex items-center"><span class="inline-block w-5 h-3 rounded mr-2 ${getTeamClass(c.equipo)}"></span>${c.equipo}</td>
                                            <td class="p-3 text-center">${c.pj}</td><td class="p-3 text-center">${c.g}</td><td class="p-3 text-center">${c.e}</td><td class="p-3 text-center">${c.p}</td>
                                            <td class="p-3 text-center">${c.gf}</td><td class="p-3 text-center">${c.gc}</td><td class="p-3 text-center">${c.dg}</td>
                                            <td class="p-3 text-center">${c.puntos}</td><td class="p-3 text-center">${c.bonus}</td><td class="p-3 font-bold text-center">${c.total}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- Goleadoras y Penaltis -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                        <!-- Goleadoras -->
                        <div class="md:col-span-1">
                            <h3 class="text-xl font-bold mb-3">Goleadoras</h3>
                            <div class="bg-white rounded-lg shadow-md p-4 space-y-3">
                                ${jornada.goleadoras.map(g => `
                                    <div class="flex justify-between items-center">
                                        <span>${g.jugadora}</span>
                                        <span class="font-bold bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">${g.goles} ${g.penaltis ? `(${g.penaltis}p)`: ''}</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        <!-- Penaltis -->
                        <div class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-4">
                           <div>
                                <h3 class="text-xl font-bold mb-3">Penaltis Marcados</h3>
                                <div class="bg-white rounded-lg shadow-md p-4 space-y-2">
                                    ${jornada.penaltis.marcados.map(p => `
                                        <p>${p.jugadora} <span class="text-xs text-gray-500">(${p.equipo})</span></p>
                                    `).join('')}
                                </div>
                           </div>
                           <div>
                                <h3 class="text-xl font-bold mb-3">Penaltis Cometidos</h3>
                                <div class="bg-white rounded-lg shadow-md p-4 space-y-2">
                                     ${jornada.penaltis.cometidos.map(p => `
                                        <p>${p.jugadora} <span class="text-xs text-gray-500">(${p.equipo}) ${p.cantidad > 1 ? `x${p.cantidad}`: ''}</span></p>
                                    `).join('')}
                                </div>
                           </div>
                        </div>
                    </div>
                </div>
            `;
            contentArea.innerHTML = contentHTML;
        }
        
        function renderRankingIndividual() {
            const ranking = tournamentData.copa_polo.ranking_individual;
            let contentHTML = `
                <div>
                    <h2 class="text-2xl font-bold mb-4">Ranking Individual</h2>
                    <div class="bg-white rounded-lg shadow-md overflow-x-auto">
                        <table class="min-w-full text-sm text-left">
                            <thead class="bg-gray-100 text-gray-600 uppercase">
                                <tr>
                                    <th class="p-3 sticky-col-header-1">#</th>
                                    <th class="p-3 sticky-col-header-2">Jugadora</th>
                                    <th class="p-3 text-center">Puntos</th>
                                    <th class="p-3 text-center">Jornadas</th>
                                    <th class="p-3 text-center">Goles</th>
                                    <th class="p-3 text-center">P. Marcados</th>
                                    <th class="p-3 text-center">P. Cometidos</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                ${ranking.map((r, i) => `
                                    <tr class="hover:bg-gray-50">
                                        <td class="p-3 font-semibold sticky-col-1">${i + 1}</td>
                                        <td class="p-3 font-semibold sticky-col-2">${r.jugadora}</td>
                                        <td class="p-3 text-center font-bold">${r.puntos}</td>
                                        <td class="p-3 text-center">${r.jornadas_disputadas || 0}</td>
                                        <td class="p-3 text-center">${r.goles || 0}</td>
                                        <td class="p-3 text-center">${r.penaltis_marcados || 0}</td>
                                        <td class="p-3 text-center">${r.penaltis_cometidos || 0}</td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
             contentArea.innerHTML = contentHTML;
        }

        function switchTab(tabId, buttonEl) {
            document.querySelectorAll('#tabs button').forEach(b => b.classList.remove('tab-active'));
            buttonEl.classList.add('tab-active');

            if (tabId === 'ranking') {
                renderRankingIndividual();
            } else {
                const semana = parseInt(tabId.split('-')[1]);
                renderJornada(semana);
            }
        }

        function initialize() {
            const { jornadas } = tournamentData.copa_polo;

            // --- C√ÅLCULO DE JORNADAS DISPUTADAS ---
            const playerParticipation = {};
            const normalizeName = (name) => {
                if (name === 'Julia Colomina') return 'Julia';
                if (name === 'Estel Pecham√©') return 'Estel Pecham√©';
                if (name === 'Estel') return 'Estel Pecham√©';
                return name;
            };

            jornadas.forEach(jornada => {
                const playersInJornada = new Set();
                Object.values(jornada.equipos).forEach(equipo => {
                    equipo.jugadoras.forEach(nombre => playersInJornada.add(normalizeName(nombre)));
                    playersInJornada.add(normalizeName(equipo.portera));
                });
                
                // A√±adir a Andrea en la Jornada 1 por el gol marcado
                if (jornada.semana === 1) {
                    playersInJornada.add('Andrea');
                }

                playersInJornada.forEach(player => {
                    playerParticipation[player] = (playerParticipation[player] || 0) + 1;
                });
            });

            // A√±adir el recuento de participaci√≥n al ranking
            let ranking = tournamentData.copa_polo.ranking_individual;
            ranking.forEach(p => {
                const cleanName = p.jugadora.replace(' (p.)', '');
                const normalizedName = normalizeName(cleanName);
                p.jornadas_disputadas = playerParticipation[normalizedName] || 0;
            });
            // --- FIN DEL C√ÅLCULO ---

            // Crear pesta√±as para jornadas
            jornadas.forEach(j => {
                const button = document.createElement('button');
                button.textContent = `Jornada ${j.semana}`;
                button.className = 'text-lg font-medium py-3 px-1 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300';
                button.onclick = () => switchTab(`jornada-${j.semana}`, button);
                tabsContainer.appendChild(button);
            });
            
            // Crear pesta√±a para el ranking
            if (ranking) {
                const button = document.createElement('button');
                button.textContent = `Ranking Individual`;
                button.className = 'text-lg font-medium py-3 px-1 border-b-2 border-transparent hover:text-blue-600 hover:border-blue-300';
                button.onclick = () => switchTab('ranking', button);
                tabsContainer.appendChild(button);
            }

            // Mostrar la √∫ltima jornada por defecto
            const lastJornada = jornadas[jornadas.length - 1];
            if(lastJornada) {
                const firstButton = tabsContainer.querySelector('button');
                switchTab(`jornada-${jornadas[0].semana}`, firstButton);
            }
        }
        
        // Iniciar la aplicaci√≥n cuando el DOM est√© listo
        document.addEventListener('DOMContentLoaded', initialize);

    </script>
</body>
</html>

